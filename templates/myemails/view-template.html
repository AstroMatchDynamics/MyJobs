{% extends "base.html" %}

{% block content %}

{% include "myemails/includes/header.html" with title="testing topbar, i guess" %}

<div class="row">
    <div class="span8">
        <iframe src="{% url 'iframe-view' %}" frameborder="1" width="100%" height="600px"></iframe>
    </div>
    <div class="span4 sidebar">
        <h2 class="top">Options</h2>
        <div class="navigation">
            <a id="new-window" class="btn">Open in a New Window</a>
            <a id="email" class="btn">Send a Test Email</a>
        </div>
    </div>
</div>

<div id="show-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3>Send a Test Email</h3>
    </div>
    <div class="modal-body">
        <label for="email-input">Email</label>
        <input id="email-input" type="text" value="{{ request.user.email }}" style="width: 300px;" />
    </div>
    <div class="modal-footer">
        <a class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
        <a id="gen-report" class="btn primary">Send</a>
    </div>
</div>
{% endblock %}

{% block extra-js %}
<script src="{{ STATIC_URL }}bootstrap/bootstrap-modalmanager.js"></script>
<script src="{{ STATIC_URL }}bootstrap/bootstrap-modal.js"></script>
<script>
    $("#email").on("click", function() {
        $("#show-modal").modal("show");
        $("#email-input").select();
    });

    $("#new-window").on("click", function() {
      window.open("{% url 'iframe-view' %}", "Your Email", "width=800, height=600");
    });
</script>
{% endblock %}
{% extends 'base.html' %}
{% block content %}
    <div id="inbox" class="span8 offset2">
        {% if messages %}
            <table class="table" style="width: 100%; table-layout: fixed; border: 1px solid black;">
                <tr><th>Date</th><th>Message</th><th>{# actions #}</th></tr>
                {% for message in messages %}
                    <tr id="message-{{ message.pk }}"{% if message.read %} class="read"{% endif %}>
                        <td>{{ message.message.start_on }}</td>
                        <td>
                            <span class="circle {{ message.message.message_type }}" title="{{ message.message.display_type }}"></span>
                            {{ message.message.subject }}
                            <div id="message-{{ message.pk }}-full" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
                                <div class="modal-header">
                                    <h3>{{ message.message.subject }}</h3>
                                </div>
                                <div class="modal-body">
                                    {{ message.message.body|safe }}
                                </div>
                                <div class="modal-footer">
                                    <div class="actions">
                                        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            {% if not message.read %}
                                <a class="btn mymessage-read-{{ message.id }}-{{ user.id }}">Mark Read</a>
                            {% endif %}
                            <a class="btn mymessage-delete-{{ message.id }}-{{ user.id }}">Delete</a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
            <div class="pagination">
                <span class="step-links">
                    {% if messages.has_previous %}
                        <a id="previous_page" href="?page={{ messages.previous_page_number }}">&#8592; Previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ messages.number }} of {{ messages.paginator.num_pages }}
                    </span>

                    {% if messages.has_next %}
                        <a id="next_page" class="pull-right" href="?page={{ messages.next_page_number }}">Next &#8594;</a>
                    {% endif %}
                </span>
            </div>
        {% else %}
            <p>No messages</p>
        {% endif %}
    </div>
{% endblock %}

{% block extra-js %}
    <script type="text/javascript" src="{{ STATIC_URL }}bootstrap/bootstrap-modalmanager.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}bootstrap/bootstrap-modal.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}inbox.160-29.js"></script>
{% endblock %}

{% block activation_message %}
{% endblock %}